
@{
    ViewBag.Title = "Analytics";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="safetyTitleSection">

    <div class="container body-content">
        <h1 id="Title"> SAFETY PLAN </h1>
    </div>
</div>

<div class="row" style="margin-top:3%;padding-top:2%">
    <div class="farm" id="farm">
        <div class="model" id="model"></div>
    </div>
</div>

<div class="nav-option" style="text-align:center">
    <div class="row">
        <div class="column-last" style="        background-color: #3e290c;
        color: #dedbd5;
        padding: 20px;">
            <div class="circle-box" id="fire_nav">
                <div class="card-fireDanger" id="segueStats" style="margin:20px;position:relative">

                </div>
                <div style="text-align:center;">
                    <h3><b id="refugeeStats" style="padding:10px;"> FIRE DANGER RATING </b></h3>
                </div>
            </div>

            <div class="circle-box" id="safety_nav">
                <div class="card-plan" id="segueSports" style="margin:20px;position:relative">
                </div>
                <div style="text-align:center;">
                    <h3><b id="findSports" style="padding: 10px;"> SAFETY PLAN </b></h3>
                </div>
            </div>

            <div class="circle-box" id="emergency_nav">
                <div class="card-ec" id="segueEmergency" style="margin:20px;position:relative">

                </div>
                <div style="text-align:center;">
                    <h3><b id="emergency" style="padding: 10px;"> EMERGENCY CONTACT </b></h3>
                </div>
            </div>




        </div>
    </div>
</div>
<script type="module">

    import * as THREE from 'https://127.0.0.1:8000/build/three.module.js';
    import { RoomEnvironment } from 'https://127.0.0.1:8000/examples/jsm/environments/RoomEnvironment.js';
    import { OrbitControls } from 'https://127.0.0.1:8000/examples/jsm/controls/OrbitControls.js';
    import { GLTFLoader } from 'https://127.0.0.1:8000/examples/jsm/loaders/GLTFLoader.js';
    import { MeshoptDecoder } from 'https://127.0.0.1:8000/examples/jsm/libs/meshopt_decoder.module.js';

    let camera, scene, renderer;

    init();
    render();

    function init() {
        const container = document.getElementById('model')

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1;
        renderer.outputEncoding = THREE.sRGBEncoding;
        container.appendChild(renderer.domElement);

        camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1500);
        camera.position.set(200, 150, -50);

        const environment = new RoomEnvironment();
        const pmremGenerator = new THREE.PMREMGenerator(renderer);

        scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf1e7c9);
        scene.environment = pmremGenerator.fromScene(environment).texture;


        const loader = new GLTFLoader().setPath('https://127.0.0.1:8000/examples/models/gltf/');

        loader.setMeshoptDecoder(MeshoptDecoder);
        loader.load('scene.gltf', function (gltf) {
            scene.add(gltf.scene);

            render();

        });

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.addEventListener('change', render);
        controls.minDistance = 200;
        controls.maxDistance = 200;
        controls.target.set(0, 0, 0);
        controls.update();

        window.addEventListener('resize', onWindowResize, false);

    }

    function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize(window.innerWidth, window.innerHeight);

        render();

    }

    //

    function render() {

        renderer.render(scene, camera);

    }

</script>

<script src="~/Scripts/Analytics.js"></script>